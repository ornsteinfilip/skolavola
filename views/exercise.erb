<div class="container">
  <h2>
    <% title = case @type 
        when 1 then HALLOWEEN_MODE ? "ðŸŽƒ StraÅ¡idelnÃ© krÃ¡cenÃ­" : "KrÃ¡cenÃ­ zlomkÅ¯"
        when 2 then HALLOWEEN_MODE ? "ðŸ‘» DuchaÅ™skÃ© sÄÃ­tÃ¡nÃ­ a odÄÃ­tÃ¡nÃ­" : "SÄÃ­tÃ¡nÃ­ a odÄÃ­tÃ¡nÃ­ zlomkÅ¯"
        when 3 then HALLOWEEN_MODE ? "ðŸ¦‡ DÄ›sivÃ© porovnÃ¡vÃ¡nÃ­" : "PorovnÃ¡vÃ¡nÃ­ zlomkÅ¯"
        when 4 then HALLOWEEN_MODE ? "ðŸ•¸ï¸ PavuÄinovÃ½ pÅ™evod" : "PÅ™evod na smÃ­Å¡enÃ¡ ÄÃ­sla"
        when 5 then HALLOWEEN_MODE ? "ðŸ’€ KostlivÃ½ pÅ™evod" : "PÅ™evod na desetinnÃ¡ ÄÃ­sla"
        end %>
    <%= title %>
  </h2>

  <% instructions = case @type
      when 1 then "ZkraÅ¥ zlomek na zÃ¡kladnÃ­ tvar."
      when 2 then "VypoÄÃ­tej pÅ™Ã­klad a vÃ½sledek zapiÅ¡ jako zlomek v zÃ¡kladnÃ­m tvaru."
      when 3 then "Porovnej zlomky pomocÃ­ znamÃ©nek <, > nebo =."
      when 4 then "PÅ™eveÄ zlomek na smÃ­Å¡enÃ© ÄÃ­slo."
      when 5 then "PÅ™eveÄ zlomek na desetinnÃ© ÄÃ­slo."
      end %>
  <p class="instructions"><%= instructions %></p>

  <% explanation = case @type
      when 1 then "Zlomek krÃ¡tÃ­me tak, Å¾e Äitatele i jmenovatele dÄ›lÃ­me jejich nejvÄ›tÅ¡Ã­m spoleÄnÃ½m dÄ›litelem."
      when 2 then "PÅ™i sÄÃ­tÃ¡nÃ­ a odÄÃ­tÃ¡nÃ­ zlomkÅ¯ musÃ­me nejprve pÅ™evÃ©st zlomky na spoleÄnÃ©ho jmenovatele. PotÃ© seÄteme nebo odeÄteme Äitatele a vÃ½sledek zkrÃ¡tÃ­me."
      when 3 then "Pro porovnÃ¡nÃ­ zlomkÅ¯ je nejlepÅ¡Ã­ pÅ™evÃ©st je na spoleÄnÃ©ho jmenovatele. Pak staÄÃ­ porovnat Äitatele."
      when 4 then "PÅ™i pÅ™evodu na smÃ­Å¡enÃ© ÄÃ­slo vydÄ›lÃ­me Äitatele jmenovatelem. CelÃ¡ ÄÃ¡st je vÃ½sledek dÄ›lenÃ­, zbytek po dÄ›lenÃ­ je Äitatel novÃ©ho zlomku."
      when 5 then "Pro pÅ™evod na desetinnÃ© ÄÃ­slo vydÄ›lÃ­me Äitatele jmenovatelem."
      end %>
  <p class="explanation"><%= explanation %></p>

  <p>PÅ™Ã­klad <%= @current + 1 %> z <%= session[:example_count] %></p>
  <p>SkÃ³re: <%= @score %></p>
  
  <form action="/check/<%= @type %>" method="post" class="exercise-form">
    <div class="exercise-content">
      <div class="exercise-problem">
        <% if @type == 1 %>
          <div class="math-fraction large">
            <span class="numerator"><%= @numerator %></span>
            <span class="denominator"><%= @denominator %></span>
          </div>
          = 
        <% elsif @type == 2 %>
          <div class="math-fraction large">
            <span class="numerator"><%= @a %></span>
            <span class="denominator"><%= @b %></span>
          </div>
          <span class="fraction-operation"><%= @operation %></span>
          <div class="math-fraction large">
            <span class="numerator"><%= @c %></span>
            <span class="denominator"><%= @d %></span>
          </div>
          = 
        <% elsif @type == 3 %>
          <div class="math-fraction large">
            <span class="numerator"><%= @a %></span>
            <span class="denominator"><%= @b %></span>
          </div>
          <div class="comparison-box">?</div>
          <div class="math-fraction large">
            <span class="numerator"><%= @c %></span>
            <span class="denominator"><%= @d %></span>
          </div>
          
          <input type="hidden" name="a" value="<%= @a %>">
          <input type="hidden" name="b" value="<%= @b %>">
          <input type="hidden" name="c" value="<%= @c %>">
          <input type="hidden" name="d" value="<%= @d %>">
        <% elsif @type == 4 %>
          <div class="math-fraction large">
            <span class="numerator"><%= @a %></span>
            <span class="denominator"><%= @b %></span>
          </div>
          = 
        <% end %>
      </div>

      <div class="exercise-answer">
        <% if @type == 1 %>
          <div class="fraction-input">
            <input type="text" name="numerator" inputmode="numeric" placeholder="Äitatel" required autocomplete="off" class="numerator">
            <input type="text" name="denominator" inputmode="numeric" placeholder="jmenovatel" required autocomplete="off" class="denominator">
          </div>
          <input type="hidden" name="numerator_orig" value="<%= @numerator %>">
          <input type="hidden" name="denominator_orig" value="<%= @denominator %>">
        <% elsif @type == 2 %>
          <div class="fraction-input">
            <input type="text" name="numerator" inputmode="numeric" placeholder="Äitatel" required autocomplete="off" class="numerator">
            <input type="text" name="denominator" inputmode="numeric" placeholder="jmenovatel" required autocomplete="off" class="denominator">
          </div>
          <input type="hidden" name="a" value="<%= @a %>">
          <input type="hidden" name="b" value="<%= @b %>">
          <input type="hidden" name="c" value="<%= @c %>">
          <input type="hidden" name="d" value="<%= @d %>">
          <input type="hidden" name="operation" value="<%= @operation %>">
        <% elsif @type == 3 %>
          <div class="radio-group" style="margin-top: 20px;">
            <label class="radio-option btn">
              <input type="radio" name="answer" value="<" required onchange="updateComparisonSign(this.value)">
              <span>&lt;</span>
            </label>
            <label class="radio-option btn">
              <input type="radio" name="answer" value="=" required onchange="updateComparisonSign(this.value)">
              <span>=</span>
            </label>
            <label class="radio-option btn">
              <input type="radio" name="answer" value=">" required onchange="updateComparisonSign(this.value)">
              <span>&gt;</span>
            </label>
          </div>
        <% elsif @type == 4 %>
          <div class="exercise-answer">
            <div class="mixed-number-input">
              <input type="text" name="whole" inputmode="numeric" placeholder="celÃ¡ ÄÃ¡st" required autocomplete="off">
              <div class="fraction-input">
                <input type="text" name="numerator" inputmode="numeric" placeholder="Äitatel" required autocomplete="off" class="numerator">
                <input type="text" name="denominator" inputmode="numeric" placeholder="jmenovatel" required autocomplete="off" class="denominator">
              </div>
            </div>
            <input type="hidden" name="a" value="<%= @a %>">
            <input type="hidden" name="b" value="<%= @b %>">
          </div>
        <% elsif @type == 5 %>
          <div class="exercise-content">
            <div class="exercise-problem">
              <div class="math-fraction large">
                <span class="numerator"><%= @a %></span>
                <span class="denominator"><%= @b %></span>
              </div>
              = 
            </div>
            <div class="exercise-answer">
              <input type="text" name="answer" inputmode="decimal" placeholder="desetinnÃ© ÄÃ­slo" required autocomplete="off">
              <input type="hidden" name="a" value="<%= @a %>">
              <input type="hidden" name="b" value="<%= @b %>">
            </div>
          </div>
        <% end %>
      </div>
    </div>
    
    <div class="submit-button">
      <button type="submit" class="btn">OdpovÄ›dÄ›t</button>
    </div>
  </form>
</div>

<div class="container">
  <a href="/" class="btn">
    <%= HALLOWEEN_MODE ? "ðŸ‘» ZabÃ­t test" : "Restart" %>
  </a>
</div> 